<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chat</title>
</head>
<body>
    <ul id="mensagens"></ul>
    <form>
        
        <input type="text" id="nome" placeholder="nomeUser">
        <br>
        <input type="text" id="mensagem" placeholder="Sua Mensagem">
        <br>
        <button>send</button>
    </form>

    <script src="/socket.io/socket.io.js"></script>
    <script>

        const socket = io()

        socket.on('connect', () =>{

            console.log('vc foi conectado ', socket.id);

            socket.emit('sendItToServer', 'oi server');

        })

        socket.on('sendItToServer', (msg) =>{
            console.log(msg);
        });

        const nomeInput = document.getElementById('nome')

        const mensagemInput = document.getElementById('mensagem')

        const mensagens = document.getElementById("mensagens")

        document.querySelector('form').addEventListener('submit', event =>{
            event.preventDefault();

            const nome = nomeInput.value;

            const mensagem = mensagemInput.value;

            nome.trim() && mensagem.trim() && socket.emit('chat message',{nome, mensagem})
            mensagemInput.value = '';
            nomeInput.disable = true;
        });

        socket.on('chat message', dados =>{

            const lista = document.createElement('li');
            lista.textContent = `${dados.nome} : ${dados.mensagem}`
            mensagens.appendChild(lista);

        })

        


    </script>

</body>
</html>